<!--

    eMensageria - Sistema Open-Source de Gerenciamento de Eventos do eSocial e EFD-Reinf <www.emensageria.com.br>
    Copyright (C) 2018  Marcelo Medeiros de Vasconcellos

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

        Este programa é distribuído na esperança de que seja útil,
        mas SEM QUALQUER GARANTIA; sem mesmo a garantia implícita de
        COMERCIABILIDADE OU ADEQUAÇÃO A UM DETERMINADO FIM. Veja o
        Licença Pública Geral GNU Affero para mais detalhes.

        Este programa é software livre: você pode redistribuí-lo e / ou modificar
        sob os termos da licença GNU Affero General Public License como
        publicado pela Free Software Foundation, seja versão 3 do
        Licença, ou (a seu critério) qualquer versão posterior.

        Você deveria ter recebido uma cópia da Licença Pública Geral GNU Affero
        junto com este programa. Se não, veja <https://www.gnu.org/licenses/>.

-->{% extends 'base.html' %}
{% load templatetags %}
{% block content %}

<section class="content-header">
    <h1>
        r2070pgtoResidBR
        <small>Cadastrar/Editar</small>
    </h1>
    <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li><a href="#">r2070pgtoResidBR</a></li>
        <li class="active">Cadastrar/Editar</li>
    </ol>
</section>

{% if not for_print %}

<section class="content">

    <div class="row">
        <div class="col-xs-12">
            <div class="nav-tabs-custom">
                <ul class="nav nav-tabs">
                    {% if perms.r2070.can_view_r2070pgtoResidBR %}
                    <li {% if not tab %}class="active"{% endif %} >
                            <a href="{% url 'r2070_pgtoresidbr_salvar' hash='{}'|json_return_page:'r2070_pgtoresidbr_salvar'|json_return_hash:hash|json_id:r2070_pgtoresidbr_id|json_print:0|base64_encode_me %}">
                            Pagamento a Pessoa Física ou Jurídica residente ou domiciliada no Brasil
                        </a>
                    </li>
                    {% endif %}
                    {% if r2070_pgtoresidbr_id %}
                        
                            {% if perms.r2070.can_view_r2070_pgtopf %}
                                <li {% if tab == 'r2070_pgtopf' %} class="active"{% endif %} >
                                    <a href="{% url 'r2070_pgtoresidbr_salvar' hash='{}'|json_id:r2070_pgtoresidbr_id|json_print:0|json_tab:'r2070_pgtopf'|base64_encode_me %}">
                                    Beneficiário Pessoa Física - Residente no Brasil</a>
                                </li>
                            {% endif %}
                        
                            {% if perms.r2070.can_view_r2070_pgtopj %}
                                <li {% if tab == 'r2070_pgtopj' %} class="active"{% endif %} >
                                    <a href="{% url 'r2070_pgtoresidbr_salvar' hash='{}'|json_id:r2070_pgtoresidbr_id|json_print:0|json_tab:'r2070_pgtopj'|base64_encode_me %}">
                                    Pagamento a Beneficiário Pessoa Jurídica - Domiciliado no Brasil</a>
                                </li>
                            {% endif %}
                        
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>

{% else %}

<section class="invoice">

{% endif %}
  
                  
{% if not for_print %}

    {% if messages %}

    <div class="row">
        <div class="pad margin no-print">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}" style="margin-bottom: 0!important;">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    </div>

    {% endif %}

      
    {% if r2070_pgtoresidbr_form.errors %}

    <div class="row">
        <div class="pad margin no-print">
            {% for error in r2070_pgtoresidbr_form.non_field_errors %}
                <div class="alert alert-error" style="margin-bottom: 0!important;">
                    {{ error|escape }}
                </div>
            {% endfor %}
        </div>
    </div>

    {% endif %}
   
{% endif %}





   {% if r2070_pgtoresidbr_id %}
   {% if r2070_pgtoresidbr.evento.ocorrencias %}
   <div class="row">
      <div class="col-xs-12">
         <div class="small-box bg-red">
            <div class="inner">
               <strong>OCORRÊNCIAS REPORTADAS:</strong><br>
               <p>{% autoescape off %}{{ r2070_pgtoresidbr.evento.ocorrencias|lista_json_table_esocial }}{% endautoescape %}</p>
            </div>
         </div>
      </div>
   </div>
   {% endif %}
   {% if r2070_pgtoresidbr.evento.status == STATUS_EVENTO_AGUARD_PRECEDENCIA or r2070_pgtoresidbr.evento.status == STATUS_EVENTO_VALIDADO_ERRO %}
   {% if not r2070_pgtoresidbr.evento.validacao_precedencia %}
   <div class="row">
      <div class="col-xs-12">
         <div class="small-box bg-yellow">
            <div class="inner">
               <p>O evento não pode ser enviado pois está aguardando confirmação de recebimento de sua precedência!</p>
            </div>
         </div>
      </div>
   </div>
   {% endif %}
   {% if r2070_pgtoresidbr.evento.validacoes %}
   <div class="row">
      <div class="col-xs-12">
         <div class="small-box bg-red">
            <div class="inner">
               <strong>Erros de validação:</strong><br>
               <p>{% autoescape off %}{{ r2070_pgtoresidbr.evento.validacoes }}{% endautoescape %}</p>
            </div>
         </div>
      </div>
   </div>
   {% endif %}
   {% endif %}
   {% endif %} 


{% if not tab %}

    <div class="row">

        <div class="col-md-12">

        {% if not for_print %}

            <div class="box box-primary">
                <div class="box-header with-border">
                    <h3 class="box-title">Pagamento a Pessoa Física ou Jurídica residente ou domiciliada no Brasil</h3>
                </div>

        {% else %}

            <div class="row">

        {% endif %}


        {% if not for_print %}
            {% if perms.r2070.change_r2070_pgtoresidbr or perms.r2070.add_r2070_pgtoresidbr %}
                <form action="#" id="id_form_r2070_pgtoresidbr" method="POST" content="text/html; charset=UTF-8">
                {% csrf_token %}
            {% endif %}
        {% endif %}

                <div class="box-body">
                    <div class="row">
                        {% include 'forms/r2070_pgtoresidbr.html' %}
                    </div>
                </div>


                {% if not for_print %}

                <div class="row">
                    <div class="form-group col-md-4">
                        <div class="box-footer text-left">
                            <font color="red">* Campos Obrigatórios.
                            </font>
                        </div>
                    </div>
                    <div class="form-group col-md-8">
                        <div class="box-footer text-right">
                            <!-- botões especiais -->
                            {% if r2070_pgtoresidbr_id %}

                                {% if perms.r2070.add_r2070pgtoResidBR %}
                                    <a href="{% url 'r2070_pgtoresidbr_salvar'  hash='{}'|json_id:0|json_print:0|base64_encode_me %}">
                                        <span class="btn btn-info">
                                            <i class="fa fa-plus-circle"></i>
                                            &nbsp;Cadastrar
                                        </span>
                                    </a>

                                {% endif %}

                            {% endif %}

                            {% if perms.r2070.can_view_r2070_pgtoresidbr or perms.r2070.can_view_r2070_pgtoresidbr %}
                                <a href="{% url 'r2070_pgtoresidbr'  hash='{}'|json_id:0|json_print:0|base64_encode_me %}">
                                    <span class="btn btn-primary">
                                        <i class="fa fa-list"></i>
                                        &nbsp;Listagem
                                    </span>
                                </a>&nbsp;
                            {% endif %}

                            {% if perms.r2070.can_view_r2070_pgtoresidbr and r2070_pgtoresidbr_id %}
                                <a href="{% url 'r2070_pgtoresidbr_salvar' hash='{}'|json_id:r2070_pgtoresidbr_id|json_print:1|base64_encode_me %}" target="_blank">
                                    <span class="btn btn-primary">
                                        <i class="fa fa-print"></i>
                                        &nbsp;Imprimir
                                    </span>
                                </a>&nbsp;
                            {% endif %}
                            
                            {% if perms.r2070.can_view_r2070_pgtoresidbr and r2070_pgtoresidbr_id %}
                                <div class="btn-group">
                                    <button type="button" class="btn btn-primary">
                                        <i class="fa fa-download"></i>
                                        &nbsp;Exportar
                                    </button>
                                    <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                                    aria-expanded="false">
                                        <span class="caret"></span>
                                        <span class="sr-only">Exportar</span>
                                    </button>

                                    <ul class="dropdown-menu" role="menu">
                                        <li class="text-left">
                                            <a href="{% url 'r2070_pgtoresidbr_salvar' hash='{}'|json_id:r2070_pgtoresidbr_id|json_print:2|base64_encode_me %}"
                                            target="_blank">
                                                <span id="ExportarPDF" type="submit" class="btn btn-default">
                                                    <i class="fa fa-file-pdf-o"></i>
                                                    &nbsp;PDF
                                                </span>
                                            </a>
                                        </li>
                                    </ul>

                                </div>&nbsp;
                            {% endif %}

                            {% if perms.r2070.change_r2070_pgtoresidbr or perms.r2070.add_r2070_pgtoresidbr %}
                            
                            <button type="submit" class="btn btn-primary" >
                                <i class="fa fa-save"></i>
                                &nbsp;Salvar
                            </button>&nbsp;

                            {% endif %}

                            {% if perms.r2070.delete_r2070_pgtoresidbr and r2070_pgtoresidbr_id %}

                            <a href="{% url 'r2070_pgtoresidbr_apagar' hash='{}'|json_id:r2070_pgtoresidbr_id|json_print:0|base64_encode_me %}">
                                <span class="btn btn-danger">
                                    <i class="fa fa-remove"></i> &nbsp;Apagar
                                </span>
                            </a>&nbsp;

                            {% endif %}

                            <a class="btn btn-default" href="#" onclick="history.go(-1)">
                                <i class="fa fa-rotate-left"></i>
                                &nbsp;Voltar
                            </a>

                        </div>
                    </div>
                </div>
                {% endif %}

                {% if not for_print %}

                    {% if perms.r2070.change_r2070_pgtoresidbr or perms.r2070.add_r2070_pgtoresidbr %}
                        </form>
                    {% endif %}

                {% endif %}


            </div>    

        <!-- TEXTO_ABAIXO_FORMULARIO -->

        </div>
    </div>

    {% endif %}

    <!-- ANTES-FORMULARIO_TABELA_SECUNDARIA -->

    {% if r2070_pgtoresidbr_id %}

        
            
            <!-- begin_r2070_pgtopf -->

            {% if tab == 'r2070_pgtopf' or for_print %} 

                {% if perms.r2070.can_view_r2070_pgtopf %} 

                    {% if perms.r2070.change_r2070_pgtopf or perms.r2070.add_r2070pgtoPF %}
                        <script type="text/javascript">
                        function CadastroListagem() {
                            var display = document.getElementById('cadastrar').style.display;
                            if (display == "none") {
                                document.getElementById('cadastrar').style.display = 'block';
                                document.getElementById('listar').style.display = 'none';

                                document.getElementById('CadastrarBotao').style.display = 'none';
                                document.getElementById('ListarBotao').style.display = 'block';
                            } else {
                                document.getElementById('cadastrar').style.display = 'none';
                                document.getElementById('listar').style.display = 'block';

                                document.getElementById('CadastrarBotao').style.display = 'block';
                                document.getElementById('ListarBotao').style.display = 'none';
                            }
                        }
                        </script>
                    {% endif %}

                    <div class="row">
                        <div class="col-xs-12">
                            <div class="box">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Beneficiário Pessoa Física - Residente no Brasil</h3>   
                                    <div class="pull-right box-tools">
                                        {% if perms.r2070.change_r2070_pgtopf or perms.r2070.add_r2070pgtoPF %}
                                        <button class="btn btn-info pull-right" onclick="CadastroListagem()">
                                            <div id="CadastrarBotao">
                                                <i class="fa fa-plus-circle"></i> 
                                                Cadastrar
                                            </div>
                                            <div id="ListarBotao" style="display:none">
                                                <i class="fa fa-table"></i> 
                                                Listar
                                            </div>
                                        </button>
                                        {% endif %}
                                    </div>   
                                </div>
                                <div class="box-body" >
                                    {% if perms.r2070.add_r2070pgtoPF %}            
                                    <!-- begin_form_r2070_pgtopf --> 
                                    <div id="cadastrar" style="display:none">
                                        <form id="id_form_r2070_pgtopf" action="{% url 'r2070_pgtopf_salvar' hash='{}'|json_id:0|json_print:0|base64_encode_me %}" method="POST" enctype="multipart/form-data">
                                            {% csrf_token %}
                                            <div class="row">
                                                {% include 'forms/r2070_pgtopf.html' %}
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <div class="box-footer text-left">
                                                        <font color="red">
                                                            * Campos Obrigatórios.
                                                        </font>
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <div class="box-footer text-right">
                                                            <button type="submit" class="btn btn-primary">
                                                                <i class="fa fa-save"></i> Salvar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <!-- end_form_r2070_pgtopf -->
                                    {% endif %} 
                                    <div id="listar"> 
                                    <!-- begin_table_r2070_pgtopf --> 

                                    {% include 'tables/r2070_pgtopf.html' %}
                                        
                                    <!-- end_table_r2070_pgtopf --> 

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                {% endif %} 

            {% endif %}  

            <!-- end_r2070_pgtopf -->

        
            
            <!-- begin_r2070_pgtopj -->

            {% if tab == 'r2070_pgtopj' or for_print %} 

                {% if perms.r2070.can_view_r2070_pgtopj %} 

                    {% if perms.r2070.change_r2070_pgtopj or perms.r2070.add_r2070pgtoPJ %}
                        <script type="text/javascript">
                        function CadastroListagem() {
                            var display = document.getElementById('cadastrar').style.display;
                            if (display == "none") {
                                document.getElementById('cadastrar').style.display = 'block';
                                document.getElementById('listar').style.display = 'none';

                                document.getElementById('CadastrarBotao').style.display = 'none';
                                document.getElementById('ListarBotao').style.display = 'block';
                            } else {
                                document.getElementById('cadastrar').style.display = 'none';
                                document.getElementById('listar').style.display = 'block';

                                document.getElementById('CadastrarBotao').style.display = 'block';
                                document.getElementById('ListarBotao').style.display = 'none';
                            }
                        }
                        </script>
                    {% endif %}

                    <div class="row">
                        <div class="col-xs-12">
                            <div class="box">
                                <div class="box-header with-border">
                                    <h3 class="box-title">Pagamento a Beneficiário Pessoa Jurídica - Domiciliado no Brasil</h3>   
                                    <div class="pull-right box-tools">
                                        {% if perms.r2070.change_r2070_pgtopj or perms.r2070.add_r2070pgtoPJ %}
                                        <button class="btn btn-info pull-right" onclick="CadastroListagem()">
                                            <div id="CadastrarBotao">
                                                <i class="fa fa-plus-circle"></i> 
                                                Cadastrar
                                            </div>
                                            <div id="ListarBotao" style="display:none">
                                                <i class="fa fa-table"></i> 
                                                Listar
                                            </div>
                                        </button>
                                        {% endif %}
                                    </div>   
                                </div>
                                <div class="box-body" >
                                    {% if perms.r2070.add_r2070pgtoPJ %}            
                                    <!-- begin_form_r2070_pgtopj --> 
                                    <div id="cadastrar" style="display:none">
                                        <form id="id_form_r2070_pgtopj" action="{% url 'r2070_pgtopj_salvar' hash='{}'|json_id:0|json_print:0|base64_encode_me %}" method="POST" enctype="multipart/form-data">
                                            {% csrf_token %}
                                            <div class="row">
                                                {% include 'forms/r2070_pgtopj.html' %}
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-md-6">
                                                    <div class="box-footer text-left">
                                                        <font color="red">
                                                            * Campos Obrigatórios.
                                                        </font>
                                                    </div>
                                                    <div class="form-group col-md-6">
                                                        <div class="box-footer text-right">
                                                            <button type="submit" class="btn btn-primary">
                                                                <i class="fa fa-save"></i> Salvar
                                                            </button>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </form>
                                    </div>
                                    <!-- end_form_r2070_pgtopj -->
                                    {% endif %} 
                                    <div id="listar"> 
                                    <!-- begin_table_r2070_pgtopj --> 

                                    {% include 'tables/r2070_pgtopj.html' %}
                                        
                                    <!-- end_table_r2070_pgtopj --> 

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                {% endif %} 

            {% endif %}  

            <!-- end_r2070_pgtopj -->

        

    {% endif %}

</section>

<!-- script -->
<!--- javascript -->

{% endblock content %}