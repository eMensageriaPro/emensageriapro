{% extends 'base.html' %}{% load templatetags %}{% block content %}
<!--

    eMensageriaPro - Sistema de Gerenciamento de Eventos <www.emensageria.com.br>
    Copyright (C) 2018  Marcelo Medeiros de Vasconcellos

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.

        Este programa é distribuído na esperança de que seja útil,
        mas SEM QUALQUER GARANTIA; sem mesmo a garantia implícita de
        COMERCIABILIDADE OU ADEQUAÇÃO A UM DETERMINADO FIM. Veja o
        Licença Pública Geral GNU Affero para mais detalhes.

        Este programa é software livre: você pode redistribuí-lo e / ou modificar
        sob os termos da licença GNU Affero General Public License como
        publicado pela Free Software Foundation, seja versão 3 do
        Licença, ou (a seu critério) qualquer versão posterior.

        Você deveria ter recebido uma cópia da Licença Pública Geral GNU Affero
        junto com este programa. Se não, veja <https://www.gnu.org/licenses/>.

-->
{% if not output %}

    <section class="content-header">
      <h1>
        R-4099 - Fechamento dos Eventos Periódicos Série R-4000
        <small>Verificações</small>
      </h1>
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li><a href="#">R-4099 - Fechamento dos Eventos Periódicos Série R-4000</a></li>
        <li class="active">Verificar</li>
      </ol>
    </section>
    <section class="content">

        {% if messages %}
                <div class="pad margin no-print">
            {% for message in messages %}
                    <div class="alert alert-{{ message.tags }}" style="margin-bottom: 0!important;">
                        {{ message }}
                    </div>
            {% endfor %}
                </div>
        {% endif %}

      

      <div class="row">
        <div class="col-xs-12">
          <div class="box">
            <div class="box-header with-border">
              <h3 class="box-title">R-4099 - Fechamento dos Eventos Periódicos Série R-4000<br>Identidade: {{ r4099_evtfech.identidade }}</h3>
              <div class="text-right">
                <a href="{% url 'r4099_evtfech_verificar' pk=pk %}" target="_blank">
                  <button id="btnImprimir" class="btn btn-primary"><i class="fa fa-print"></i> Imprimir</button>
                </a>



                  <div class="btn-group">
                                <button type="button" class="btn btn-primary"><i class="fa fa-download"></i>&nbsp;Exportar
                                </button>
                                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown"
                                        aria-expanded="false"><span class="caret"></span><span class="sr-only">Exportar</span>
                                </button>
                                <ul class="dropdown-menu" role="menu">
                                    <li class="text-left"><a
                                            href="{% url 'r4099_evtfech_verificar_output' pk=pk output='pdf' %}"
                                            target="_blank"><i class="fa fa-file-pdf-o"></i>&nbsp;PDF</a></li>
                                    <li class="text-left"><a
                                            href="{% url 'r4099_evtfech_verificar_output' pk=pk output='xls' %}"
                                            target="_blank"><i class="fa fa-file-excel-o"></i>&nbsp;XLS</a></li>
                                </ul>
                            </div>&nbsp;

              </div>              
            </div>
            <div class="box-body">
{% else %} 
   <section class="invoice">
      <div class="row">
        <div class="col-xs-12">
          <h2 class="page-header">
            R-4099 - Fechamento dos Eventos Periódicos Série R-4000<br>Identidade: {{ r4099_evtfech.identidade }}
            <small class="pull-right">Usuário: {{ usuario.nome }}<br>Data: {{ data }}<br></small>
          </h2>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12 table-responsive">
{% endif %} 




      <h4>Layout</h4>




<table {% if not for_print %}class="table table-bordered"{% else %}border=1 border="0.5px" cellpadding="5px" width="100%"{% endif %}>
              
        <tr>
            <td bgcolor="lightgray" colspan="1" width="130px">evtFech</td>
            <td bgcolor="lightgray" colspan="3">Evento de Fechamento. <regras_validacao> REGRA_EXISTE_INFO_CONTRIBUINTE REGRA_VALIDA_CONTRIBUINTE</td>
        </tr>
    {% for r4099_evtfech in r4099_evtfech_lista %}
    {% ifequal 1 1 %}
        <tr>
            <td bgcolor="lightgray" colspan="1" width="130px">ideEvento</td>
            <td bgcolor="lightgray" colspan="3">Informações de Identificação do Evento.</td>
        </tr>

        <tr {% if r4099_evtfech.perapur|validacoes_esocial_efdreinf:"r4099_evtfech.perapur" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">perApur</td>
            <td width="500px">Informar o ano/mês de referência das informações no formato AAAA-MM. <validacao> Deve ser um ano/mês válido para o qual haja informações do contribuinte informadas através do evento R-1000. Não pode ser maior que o ano/mês corrente.</td>
            <td width="200px"><b>{% if r4099_evtfech.perapur or r4099_evtfech.perapur == 0 %}{{ r4099_evtfech.perapur }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_evtfech.tpamb|validacoes_esocial_efdreinf:"r4099_evtfech.tpamb" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">tpAmb</td>
            <td width="500px">Identificação do ambiente<opcoes>1 - Produção; 2 - Produção restrita. <valores_validos> 1, 2.</td>
            <td width="200px"><b>{% if r4099_evtfech.tpamb or r4099_evtfech.tpamb == 0 %}{{ r4099_evtfech.tpamb }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_evtfech.procemi|validacoes_esocial_efdreinf:"r4099_evtfech.procemi" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">procEmi</td>
            <td width="500px">Processo de emissão do evento<opcoes>1 - Aplicativo do contribuinte; 2 - Aplicativo governamental. <valores_validos> 1, 2.</td>
            <td width="200px"><b>{% if r4099_evtfech.procemi or r4099_evtfech.procemi == 0 %}{{ r4099_evtfech.procemi }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_evtfech.verproc|validacoes_esocial_efdreinf:"r4099_evtfech.verproc" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">verProc</td>
            <td width="500px">Versão do processo de emissão do evento. Informar a versão do aplicativo emissor do evento.</td>
            <td width="200px"><b>{% if r4099_evtfech.verproc or r4099_evtfech.verproc == 0 %}{{ r4099_evtfech.verproc }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>
 
        <tr>
            <td bgcolor="lightgray" colspan="1" width="130px">ideContri</td>
            <td bgcolor="lightgray" colspan="3">Informações de identificação do contribuinte.</td>
        </tr>

        <tr {% if r4099_evtfech.tpinsc|validacoes_esocial_efdreinf:"r4099_evtfech.tpinsc" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">tpInsc</td>
            <td width="500px">Preencher com o código correspondente ao tipo de inscrição. <validacao> Deve ser igual a [1] (CNPJ) ou [2] (CPF). <valores_validos> 1, 2.</td>
            <td width="200px"><b>{% if r4099_evtfech.tpinsc or r4099_evtfech.tpinsc == 0 %}{{ r4099_evtfech.tpinsc }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_evtfech.nrinsc|validacoes_esocial_efdreinf:"r4099_evtfech.nrinsc" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">nrInsc</td>
            <td width="500px">Informar o número de inscrição do contribuinte de acordo com o tipo de inscrição indicado no campo {tpInsc}. Se for um CNPJ deve ser informada apenas a Raiz/Base de oito posições, exceto se natureza jurídica de administração pública direta federal ([101-5], [104-0], [107-4], [116-3], situação em que o campo deve ser preenchido com o CNPJ completo (14 posições). <validacao> Se {tpInsc} for igual a [1], deve ser um número de CNPJ válido. Se {tpInsc} for igual a [2], deve ser um CPF válido.</td>
            <td width="200px"><b>{% if r4099_evtfech.nrinsc or r4099_evtfech.nrinsc == 0 %}{{ r4099_evtfech.nrinsc }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>
 
        <tr>
            <td bgcolor="lightgray" colspan="1" width="130px">ideRespInf</td>
            <td bgcolor="lightgray" colspan="3">Responsável pelas informações.</td>
        </tr>
    {% for r4099_iderespinf in r4099_iderespinf_lista %}
    {% ifequal r4099_iderespinf.r4099_evtfech.id r4099_evtfech.id %}
        <tr {% if r4099_iderespinf.nmresp|validacoes_esocial_efdreinf:"r4099_iderespinf.nmresp" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">nmResp</td>
            <td width="500px">Nome do responsável pelas informações.</td>
            <td width="200px"><b>{% if r4099_iderespinf.nmresp or r4099_iderespinf.nmresp == 0 %}{{ r4099_iderespinf.nmresp }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099ideRespInf or perms.efdreinf.can_see_r4099ideRespInf %}
                <a href="{% url 'r4099_iderespinf_salvar' pk=r4099_iderespinf.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_iderespinf.cpfresp|validacoes_esocial_efdreinf:"r4099_iderespinf.cpfresp" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">cpfResp</td>
            <td width="500px">Preencher com o CPF do responsável. <validacao> Deve ser um número de CPF válido.</td>
            <td width="200px"><b>{% if r4099_iderespinf.cpfresp or r4099_iderespinf.cpfresp == 0 %}{{ r4099_iderespinf.cpfresp }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099ideRespInf or perms.efdreinf.can_see_r4099ideRespInf %}
                <a href="{% url 'r4099_iderespinf_salvar' pk=r4099_iderespinf.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_iderespinf.telefone|validacoes_esocial_efdreinf:"r4099_iderespinf.telefone" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">telefone</td>
            <td width="500px">Informar o número do telefone, com DDD. <validacao> Se preenchido, deve conter apenas números com o mínimo de dez dígitos.</td>
            <td width="200px"><b>{% if r4099_iderespinf.telefone or r4099_iderespinf.telefone == 0 %}{{ r4099_iderespinf.telefone }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099ideRespInf or perms.efdreinf.can_see_r4099ideRespInf %}
                <a href="{% url 'r4099_iderespinf_salvar' pk=r4099_iderespinf.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_iderespinf.email|validacoes_esocial_efdreinf:"r4099_iderespinf.email" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">email</td>
            <td width="500px">Endereço eletrônico. <validacao> O e-mail deve possuir o caractere "@" e este não pode estar no início e/ou no final do endereço informado. Deve possuir no mínimo um caractere "." depois do @ e não pode estar no final do endereço informado.</td>
            <td width="200px"><b>{% if r4099_iderespinf.email or r4099_iderespinf.email == 0 %}{{ r4099_iderespinf.email }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099ideRespInf or perms.efdreinf.can_see_r4099ideRespInf %}
                <a href="{% url 'r4099_iderespinf_salvar' pk=r4099_iderespinf.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>
    {% endifequal %}{% endfor %}
        <tr>
            <td bgcolor="lightgray" colspan="1" width="130px">infoFech</td>
            <td bgcolor="lightgray" colspan="3">Informações do Fechamento.</td>
        </tr>

        <tr {% if r4099_evtfech.evtretpf|validacoes_esocial_efdreinf:"r4099_evtfech.evtretpf" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">evtRetPF</td>
            <td width="500px">Possui informações de pagamentos ou crédito a beneficiário PF no período de apuração<opcoes>S - Sim; N - Não. <validacao> Se for igual a [S], deve existir evento R-4010 para o período de apuração. Caso contrário, não deve existir o referido evento. <valores_validos> S, N.</td>
            <td width="200px"><b>{% if r4099_evtfech.evtretpf or r4099_evtfech.evtretpf == 0 %}{{ r4099_evtfech.evtretpf }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_evtfech.evtretpj|validacoes_esocial_efdreinf:"r4099_evtfech.evtretpj" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">evtRetPJ</td>
            <td width="500px">Possui informações de pagamentos ou crédito a beneficiário PJ no período de apuração<opcoes>S - Sim; N - Não. <validacao> Se for igual a [S], deve existir evento R-4020 para o mesmo período de apuração. Caso contrário, não deve existir o referido evento. <valores_validos> S, N.</td>
            <td width="200px"><b>{% if r4099_evtfech.evtretpj or r4099_evtfech.evtretpj == 0 %}{{ r4099_evtfech.evtretpj }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>

        <tr {% if r4099_evtfech.evtpgtosnid|validacoes_esocial_efdreinf:"r4099_evtfech.evtpgtosnid" %}bgcolor="lightcoral"{% endif %}>
            <td width="130px">evtPgtosNId</td>
            <td width="500px">Possui informações de pagamentos a beneficiários não identificados no período de apuração<opcoes>S - Sim; N - Não. <validacao> Se for igual a [S], deve existir o evento R-4040 para o mesmo período de apuração. Caso contrário, não deve existir o referido evento. <valores_validos> S, N.</td>
            <td width="200px"><b>{% if r4099_evtfech.evtpgtosnid or r4099_evtfech.evtpgtosnid == 0 %}{{ r4099_evtfech.evtpgtosnid }}{% else %}(vazio){% endif %}</b></td>
            {% if not output %}
            <td width="40px">
              <div>
                {% if perms.r4099.can_see_r4099evtFech or perms.efdreinf.can_see_r4099evtFech %}
                <a href="{% url 'r4099_evtfech_salvar' pk=r4099_evtfech.id tab='master' %}">
                    <span class="btn btn-primary">
                        <i class="fa fa-fw fa-edit"></i>
                    </span>
                </a>
                {% endif %}
              </div>
            </td>
            {% endif %}
        </tr>
 {% endifequal %}{% endfor %}
</table>
{% if not for_print %}
            </div>
          </div>
        </div>
      </div>
    </section>
{% else %} 

        </div>
      </div>
    </section>
{% endif %}  

{% endblock content %}